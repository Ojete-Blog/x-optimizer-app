<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>X Optimizer App v11.0 - Grow Your @GlobalEye_TV</title>
    <!-- Hoja de estilos -->
    <link rel="stylesheet" href="styles.css" />
    <!-- Gráficas -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Google Ads: Sustituye ca‑pub‑REPLACE con tu ID de AdSense para anuncios reales -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-REPLACE_WITH_YOUR_ADSENSE_CLIENT" crossorigin="anonymous"></script>
    <!-- Google Identity Services para inicio de sesión -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>
    <!-- Cabecera profesional -->
    <header class="main-header">
        <h1>X Post Optimizer v11.0</h1>
        <p class="subtitle">Optimiza y analiza tus posts de X para @GlobalEye_TV</p>
    </header>
    <!-- Menú de pestañas -->
    <nav class="tab-menu">
        <button class="tab-button active" data-tab="analyze">Optimizar</button>
        <button class="tab-button" data-tab="report">Informe</button>
    </nav>
    <!-- Contenedor principal -->
    <div class="container">
        <!-- Pestaña: Optimizar -->
        <div id="tab-analyze" class="tab-content">
            <!-- Panel de inicio de sesión -->
            <div class="panel">
                <h3>Cuenta</h3>
                <div id="googleLoginSection" class="login-container">
                    <div id="googleSignInDiv"></div>
                    <div id="userInfo" class="user-info">
                        Sesión iniciada como <span id="userEmail"></span>.
                        <button id="logoutBtn" type="button">Cerrar sesión</button>
                    </div>
                </div>
            </div>
            <!-- Panel de URL y preview -->
            <div class="panel">
                <h3>Enlace del post</h3>
                <input type="text" id="postUrl" placeholder="URL del post (https://x.com/user/status/123456)" class="url-input" oninput="loadPreview()" />
                <div id="previewContainer" class="preview-box">
                    <p id="previewStatus">Pega URL para preview/investigación, o usa manual abajo.</p>
                    <div id="tweetEmbed"></div>
                </div>
            </div>
            <!-- Panel de entrada manual -->
            <div class="panel">
                <h3>Entrada Manual</h3>
                <textarea id="postInput" placeholder="Texto manual si no hay URL o parsing falla..."></textarea>
                <textarea id="mediaInput" placeholder="Media manual (ej: 'Imagen de noticia', 'Video corto')..."></textarea>
            </div>
            <!-- Panel de API keys opcionales -->
            <div class="panel api-keys">
                <h3>API Keys (opcional)</h3>
                <input type="text" id="newsApiKey" placeholder="NewsAPI.org Key" />
                <input type="text" id="newsdataApiKey" placeholder="NewsData.io Key" />
                <input type="text" id="sentimentApiKey" placeholder="Twinword Sentiment Key" />
                <button type="button" onclick="saveApiKeys()">Guardar Keys</button>
            </div>
            <!-- Acciones -->
            <div class="actions">
                <button id="btnSubscribe" class="sub-button" type="button">Sin anuncios 1€</button>
                <button type="button" onclick="autoAnalyze()" class="auto-button">Auto‑Analizar &amp; Optimizar</button>
                <button type="button" onclick="generateGrokPrompt()" class="grok-button prominent">Generar Prompt para Grok</button>
            </div>
        </div>
        <!-- Pestaña: Informe -->
        <div id="tab-report" class="tab-content" style="display: none;">
            <div id="grokPromptContainer" style="display: none;"></div>
            <div id="results"></div>
        </div>
    </div>
    <!-- Popup de publicidad (overlay) eliminado: solo se utiliza anuncio en pie de página para una experiencia sin interrupciones -->
    <!-- Anuncio en pie de página -->
    <div id="footerAd" class="footer-ad hidden" role="complementary" aria-label="Publicidad en pie de página">
        <button id="closeFooterAd" class="footer-ad-close" type="button" aria-label="Cerrar anuncio" onclick="document.getElementById('footerAd').classList.add('hidden')">×</button>
        <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-REPLACE_WITH_YOUR_ADSENSE_CLIENT" data-ad-slot="REPLACE_WITH_FOOTER_AD_SLOT_ID" data-ad-format="auto" data-full-width-responsive="true"></ins>
        <button id="btnSubscribeFooter" class="sub-button" type="button">Sin anuncios 1€</button>
    </div>
    <!-- Librería de widgets de X -->
    <script async src="https://platform.x.com/widgets.js" charset="utf-8" id="x-widgets"></script>
    <!-- Lógica principal -->
    <script src="main.js?v=20260124a"></script>
</body>
</html>